<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAZE INTERNATIONAL LGBTQIA FILM FESTIVAL</title>
    <meta name="description" content="Join the GAZE INTERNATIONAL LGBTQIA FILM FESTIVAL for a celebration of queer cinema.">
    <link rel="icon" href="path/to/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://use.typekit.net/opq3sul.css">
    <link rel="stylesheet" href="styles.css">
    <!-- Add Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXX-Y"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-XXXXX-Y');
    </script>
</head>
<body>
    <!-- SKIP TO CONTENT -->
    <a href="#maincontent" role="link" tabindex="0" class="skip-link">Become a Festival Friend. Press enter to skip to page content, or press tab to navigate menu</a>
    <!-- Main Title -->
    <header tabindex="0" aria-label="Home Button">
        <a href="index.html" style="display: inline-block; cursor: pointer;">
            <img src="img/gaze_logo.png">
        </a>
    </header>
    <!-- BUTTON TOGGLE MENU -->
    <button class="menu-toggle" tabindex="0" aria-haspopup="true" aria-expanded="false" aria-label="The main menu is now open, press tab to navigate"></button>
       <!-- Menu -->
       <nav>
        <ul>
            <li class="dropdown" tabindex="0" aria-label="Main Menu Header, About">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">ABOUT</a>
                <ul class="dropdown-content">
                    <li tabindex="0" aria-label=" Who are we?" role="button"><a href="whoarewe.html">Who Are We?</a></li>
                    <li tabindex="0" aria-label=" Director's Welcome message" role="button"><a href="Directors_Welcome.html">Director's Welcome</a></li>
                    <li tabindex="0" aria-label=" Manager's Welcome message" role="button"><a href="chair.html">Chair's Welcome</a></li>
                    <li tabindex="0" aria-label=" View past programmes" role="button"><a href="archive.html">Archive</a></li>
                    <li tabindex="0" aria-label=" Submit via Film Freeway" role="button"><a href="https://filmfreeway.com/gaze-ireland">Submit A Film</a></li>

                </ul>
            </li>
            <li class="dropdown" tabindex="0" aria-label="Menu Section, Tickets">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">TICKETS</a>
                <ul class="dropdown-content">
                    <li tabindex="0" aria-label=" Festival Pass" role="button"><a href="https://events.ticketbooth.eu/event/gaze-festival-pass" target="_blank">Festival Pass</a></li>
                    <li tabindex="0" aria-label="Christmas Screenings" role="button"><a href="xmas.html">Christmas Screenings</a></li>
                    <!--
                    <li tabindex="0" aria-label=" View timetable" role="button"><a href="Timetable.html">Timetable</a></li>
                    <li tabindex="0" aria-label="Best Judys" role="button"><a href="judy.html">Best Judys</a></li>
                    <li tabindex="0" aria-label="IFI @ Home" role="button"><a href="ifi.html">IFI @ Home</a></li>
                    -->
                </ul>
            </li>
            <!--
            <li class="dropdown" tabindex="0" aria-label="main menu, Programme of events">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">PROGRAMME</a>
                <ul class="dropdown-content">
                    <li tabindex="0" aria-label=" view Films showing on Thursday the 1st of August" role="button"><a href="thurs.html">Thursday 1st August 2024</a></li>
                    <li tabindex="0" aria-label=" view Films showing on Friday the 2nd of August" role="button"><a href="fri.html">Friday 2nd August 2024</a></li>
                    <li tabindex="0" aria-label=" view Films showing on Saturday the 3rd of August" role="button"><a href="sat.html">Saturday 3rd August 2024</a></li>
                    <li tabindex="0" aria-label=" view Films showing on Sunday the 4th of August" role="button"><a href="sun.html">Sunday 4th August 2024</a></li>
                    <li tabindex="0" aria-label=" view Films showing on Monday the 5th of August" role="button"><a href="mon.html">Monday 5th August 2024</a></li>
                </ul>
            </li>
            -->
            <li class="dropdown" tabindex="0" aria-label="Main Menu Header, Support">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">SUPPORT</a>
                <ul class="dropdown-content">
                    <li tabindex="0" aria-label=" Subscribe to newsletter" role="button"><a href="https://mailchi.mp/gaze/gaze-newsletter-sign-up" target="_blank">Subscribe</a></li>
                    <li tabindex="0" aria-label=" Become a Festival Friend" role="button"><a href="friend.html">Festival Friend</a></li>
                    <li tabindex="0" aria-label=" Volunteer With GAZE" role="button"><a href="vol.html">Volunteer</a></li>
                    <li tabindex="0" aria-label=" Star GAZE" role="button"><a href="stargaze.html">StarGAZE</a></li>
                </ul>
            </li>
            <li class="dropdown" tabindex="0" aria-label="Main Menu Header, Support">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">ACCESSIBILITY</a>
                <ul class="dropdown-content">
                    <li tabindex="0" aria-label="Video Guide To The Festival" role="button"><a href="https://youtu.be/PHfYZgj4Y2o" target="_blank">Video Guide</a></li>
                    <li tabindex="0" aria-label="Easy Read Guide To The Festival" role="button"><a href="img/archive/GAZE Easy Read July 2024.pdf" target="_blank">Easy Read Guide</a></li>
                    <li tabindex="0" aria-label="Easy Read Guide To Star Gaze" role="button"><a href="img/archive/starGAZE easy read document (2).pdf">StarGAZE</a></li>
                    <li tabindex="0" aria-label="Easy Read Festival Programme" role="button"><a href="img/archive/GAZE large print programme 2024.pdf">Programme</a></li>
                </ul>
            </li>        
        </ul>
    </nav>
    <!-- Main Body -->
    <main id="maincontent">
        <article>

            <h2 tabindex="0"  role="heading">
                    IFI @ Home
            </h2>

            <h3 tabindex="0" role="heading">
                    GAZE on demand
            </h3>

                <img tabindex="0" alt="The image shows an engaged cinema audience" 
                    src="img/updated/audience.jpeg">
<br><br>

        <p tabindex="0"><strong>We are delighted to partner again with IFI@Home to present GAZE's online programme.</strong> 
            <br><br>
Available from the comfort of your home, anywhere in Ireland, 
            this year's digital programme features shock, fantasy, romance, comedy amongst lots more themes. Streaming on IFI@Home from 6th to 12th August, 
            enjoy all five titles with the bundle pass available on the IFI@Home's website. Explore the programme here.</p>

            <br><br>


            <div class="ticketbutton" tabindex="0" role="link">
                <a href="https://www.ifihome.ie/page/gaze-online-2024/" target="_blank">IFI @ Home</a>
            </div>
            <br><br>            <br><br>            <br><br>
            
        </article>

    </main>
   <!-- Footer -->
   <footer class="black-background">
    <div class="social-icons">
        <a href="https://www.instagram.com/gazefilmfest/" target="_blank" aria-label="Instagram" role="link">
            <img src="img/instagram-icon.png" alt="Link to Instagram page" tabindex="0">
        </a>
        <a href="https://www.facebook.com/gazefilmfest/" target="_blank" aria-label="Facebook" role="link">
            <img src="img/facebook-app-round-white-icon.png" alt="Link to Facebook page" tabindex="0">
        </a>
        <a href="https://x.com/GAZEfilmfest" target="_blank" aria-label="Twitter" role="link">
            <img src="img/x-social-media-white-icon.png" alt="Link to Twitter page" tabindex="0">
        </a>
        <a href="https://www.tiktok.com/@gazefilmfest?is_from_webapp=1&sender_device=pc" target="_blank" aria-label="Tiktok" role="link">
            <img src="img/tiktok.png" alt="Link to Tiktok page" tabindex="0">
        </a>
    </div>
    <div class="footer-text">
        &copy; GAZE Film Festival 2024 | All rights reserved
    </div>
</footer>
<script>
    
    document.addEventListener('DOMContentLoaded', function() {
    const nav = document.querySelector('nav');
    const toggleButton = document.querySelector('.menu-toggle');
    const dropdowns = document.querySelectorAll('.dropdown');
    const cursor = createCustomCursor();

    if (window.matchMedia("(min-width: 768px)").matches) {
        const cursor = createCustomCursor();
        setupCustomCursor(cursor);
        setupDropdowns(dropdowns);
        setupMenuToggle(document.querySelector('.menu-toggle'), document.querySelector('nav'));
    }
    setupDropdownZZ(dropdowns);
    setupAccessibility();
    initializeParallaxEffects();

});

function createCustomCursor() {
    const cursor = document.createElement('div');
    cursor.classList.add('custom-cursor');
    document.body.appendChild(cursor);
    return cursor;
}

function setupCustomCursor(cursor) {
    document.addEventListener('mousemove', (e) => {
        cursor.style.left = `${e.clientX}px`;
        cursor.style.top = `${e.clientY}px`;
    });

    document.querySelectorAll('a, button, input').forEach(element => {
        element.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
        element.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
    });
}

// NAV FOCUS SETUP
function setupFocusWithinNav(nav) {
    const focusableElements = nav.querySelectorAll('a, button, input'); // Extend this selector to include other focusable elements if needed
    focusableElements.forEach(element => {
        element.addEventListener('focus', openMenu);
    });
}

function setupMenuToggle(toggleButton, nav) {
    let closeMenuTimeout;

    // Function to open the menu
    function openMenu() {
        clearTimeout(closeMenuTimeout); // Clear any pending close command
        nav.style.left = '0vw';
        nav.style.opacity = '1';
        toggleButton.setAttribute('aria-expanded', 'true');
        toggleButton.classList.add('expanded');
    }

    // Function to close the menu
    function closeMenu() {
        clearTimeout(closeMenuTimeout); // Clear any pending open command to prevent conflicts
        closeMenuTimeout = setTimeout(() => {
            nav.style.left = '-20vw';
            nav.style.opacity = '0';
            toggleButton.setAttribute('aria-expanded', 'false');
            toggleButton.classList.remove('expanded');
        }, 2500); // Correct delay to 2000 milliseconds
    }

    // Toggle menu on click
     // toggleButton.addEventListener('click', function() {
     //    let isOpen = toggleButton.getAttribute('aria-expanded') === 'true';
     //    if (isOpen) {
     //        closeMenu();
     //    } else {
     //        openMenu();
     //    }
     // });

    // Open menu on focus
    toggleButton.addEventListener('focus', openMenu);

    // Hover events
    toggleButton.addEventListener('mouseenter', openMenu);
    // Only close the menu when leaving both button and nav area
    toggleButton.addEventListener('mouseleave', function(event) {
        if (!nav.contains(event.relatedTarget)) {
            closeMenu();
        }
    });
    nav.addEventListener('mouseleave', function(event) {
        if (!toggleButton.contains(event.relatedTarget)) {
            closeMenu();
        }
    });

    // Ensure keyboard accessibility
    toggleButton.addEventListener('keydown', function(event) {
        if (event.key === 'Enter' || event.key === ' ') {
            event.preventDefault(); // Stop default action
            toggleButton.click(); // Simulate click for keyboard
        }
    });
}

function setupDropdowns(dropdowns) {
    dropdowns.forEach(dropdown => {
        const mainLink = dropdown.querySelector('a:first-child');
        const dropdownContent = dropdown.querySelector('.dropdown-content');
        const dropdownLinks = dropdown.querySelectorAll('li');

        mainLink.addEventListener('click', function(event) {
            event.preventDefault();
            const isExpanded = dropdownContent.style.maxHeight !== '';
            mainLink.setAttribute('aria-expanded', isExpanded ? 'false' : 'true');
            dropdownContent.style.maxHeight = isExpanded ? '' : dropdownContent.scrollHeight + 'px';
        });

        document.addEventListener('click', function(event) {
            if (!dropdown.contains(event.target)) {
                mainLink.setAttribute('aria-expanded', 'false');
                dropdownContent.style.maxHeight = '';
            }
        });

        // Adding key press event for dropdown items
        dropdownLinks.forEach(item => {
            item.addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    const link = item.querySelector('a');
                    if (link) {
                        link.click();
                    }
                }
            });
        });
        
    });
}


// MOBILE
function setupDropdownZZ(dropdowns) {
    dropdowns.forEach(dropdown => {
        const mainLink = dropdown.querySelector('a:first-child');
        const dropdownContent = dropdown.querySelector('.dropdown-content');

        mainLink.addEventListener('click', function(event) {
            if (window.innerWidth <= 768) {
                event.preventDefault(); // Prevent navigation
                const isExpanded = dropdownContent.style.maxHeight !== '';
                mainLink.setAttribute('aria-expanded', isExpanded ? 'false' : 'true');
                dropdownContent.style.maxHeight = isExpanded ? '' : dropdownContent.scrollHeight + 'px';
            }
        });

        // Clicking outside to close dropdown
        document.addEventListener('click', function(event) {
            if (!dropdown.contains(event.target)) {
                mainLink.setAttribute('aria-expanded', 'false');
                dropdownContent.style.maxHeight = '';
            }
        });
    });
}

function setupAccessibility() {
    // Enhance accessibility for keyboard navigation
    document.querySelector('header').addEventListener('keydown', (event) => {
        if (event.key === "Enter" || event.keyCode === 13) {
            const link = event.target.querySelector('a');
            if (link) {
                link.click();
            }
        }
    });
}

function initializeParallaxEffects() {
    if (window.innerWidth > 768) {
        applyParallaxEffect();
    }
    window.addEventListener('resize', () => {
        if (window.innerWidth > 768) {
            applyParallaxEffect();
        } else {
            resetParallaxEffect();
        }
    });
}

function applyParallaxEffect() {
    document.addEventListener('scroll', () => {
        const backgrounds = [
            { element: document.querySelector('.backgroundimg'), startScroll: 100 },
            { element: document.querySelector('.animate'), startScroll: 0 },
            { element: document.querySelector('.backgroundimg2'), startScroll: 700 },
            { element: document.querySelector('.backgroundimg3'), startScroll: 2000 }
        ];

        backgrounds.forEach(bg => {
            if (bg.element) {
                const scrollPosition = window.pageYOffset;
                const scale = scrollPosition > bg.startScroll ? 1 + (scrollPosition - bg.startScroll) * 0.0001 : 1;
                bg.element.style.transform = `scale(${scale})`;
            }
        });
    });
}

function resetParallaxEffect() {
    const backgrounds = [document.querySelector('.backgroundimg'), document.querySelector('.animate'), document.querySelector('.backgroundimg2'), document.querySelector('.backgroundimg3')];
    backgrounds.forEach(bg => {
        if (bg) {
            bg.style.transform = 'scale(1)';
        }
    });
}
</script>
</body>
</html>
